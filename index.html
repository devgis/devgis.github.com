<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf8" />
<meta name="keywords" content="淘宝优惠券，超级淘宝优惠券" />
<meta name="description" content="分享淘宝，天猫优惠券。" />
<title>淘宝优惠券查询</title>
<link rel="stylesheet" href="css/app.css">
<link rel="stylesheet" href="css/index.css">
<link rel="stylesheet" href="css/fonts.css">
<link rel="stylesheet" type="text/css" href="css/normalize.css" />
<link rel="stylesheet" href="css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="css/demo.css">
<link rel="stylesheet" href="css/style.css">
<script type="text/javascript" src="js/jquery-3.2.0.min.js"></script>
<script type="text/javascript" src="js/data.js"></script>
</head>
<body>
<!-- 代码 开始 -->
<a href="index.html" target="_blank" style="float: left;padding-top: 3px;padding-left: 20px;text-align: left;width: auto;font-size: 26px;font-family:'微软雅黑';font-weight: bolder;color: #111111;">淘宝天猫内部券</a>
<div class="search d1">
	<div class="search d7">
        <form>
	  <input id="tbWords" type="text" placeholder="输入想要查询的内容">
	  <button  type="button" onclick="doSearch()"></button>
      </form>
</div>
<div class="wrap" id="wrap">
<p id="topp"></p>
<p id="topptype"></p>
    <main>
        <ul id="ullist" class="ul items">
            <li><span>暂无可显示内容，请扫描下图加入微信群分享更多内部优惠券:</span></li>&nbsp
            <li><img src="img/wx.png" alt="微信群" /></li>
        </ul>
    </main>

<div style="text-align:center;margin:50px 0">
<p id="bottomp"></p>
<p id="bottomptype"></p>
<p>我们不制造优惠券，我们只是优惠券的搬运工</a></p>
<p style="margin:20px 0"></p>
</div>
	<script type="text/javascript">
	
	var typeNames=["居家日用"
,"零食/坚果/特产"
,"女装/女士精品"
,"洗护清洁剂/卫生巾/纸/香薰"
,"饰品/流行首饰/时尚饰品新"
,"女士内衣/男士内衣/家居服"
,"床上用品"
,"居家布艺"
,"住宅家具"
,"咖啡/麦片/冲饮"
,"男装"
,"厨房/烹饪用具"
,"服饰配件/皮带/帽子/围巾"
,"童鞋/婴儿鞋/亲子鞋"
,"汽车/用品/配件/改装"
,"箱包皮具/热销女包/男包"
,"彩妆/香水/美妆工具"
,"尿片/洗护/喂哺/推车床"
,"女鞋"
,"餐饮具"
,"3C数码配件"
,"童装/婴儿装/亲子装"
,"美容护肤/美体/精油"
,"传统滋补营养品"
,"电动车/配件/交通工具"
,"运动/瑜伽/健身/球迷用品"
,"户外/登山/野营/旅行用品"
,"ZIPPO/瑞士军刀/眼镜"
,"节庆用品/礼品"
,"家庭/个人清洁工具"
,"玩具/童车/益智/积木/模型"
,"美发护发/假发"
,"个人护理/保健/按摩器材"
,"厨房电器"
,"影音电器"
,"茶"
,"粮油米面/南北干货/调味品"
,"OTC药品/医疗器械/计生用品"
,"生活电器"
,"品牌台机/品牌一体机/服务器"
,"电子词典/电纸书/文化用品"
,"成人用品/情趣用品"
,"运动包/户外包/配件"
,"书籍/杂志/报纸"
,"办公设备/耗材/相关服务"
,"运动鞋new"
,"收纳整理"
,"流行男鞋"
,"电脑硬件/显示器/电脑周边"
,"水产肉类/新鲜蔬果/熟食"
,"乐器/吉他/钢琴/配件"
,"保健食品/膳食营养补充食品"
,"基础建材"
,"手表"
,"隐形眼镜/护理液"
,"酒类"
,"宠物/宠物食品及用品"
,"孕妇装/孕产妇用品/营养"
,"家装主材"
,"家居饰品"
,"运动服/休闲服装"
,"大家电"
,"摩托车/装备/配件"
,"鲜花速递/花卉仿真/绿植园艺"
,"个性定制/设计服务/DIY"
,"特色手工艺"
,"网络设备/网络相关"
,"电子元器件市场"
,"模玩/动漫/周边/cos/桌游"
,"电玩/配件/游戏/攻略"
,"自行车/骑行装备/零配件"
,"电子/电工"
,"奶粉/辅食/营养品/零食"
,"DIY电脑"
,"五金/工具"
,"教育培训"
,"闪存卡/U盘/存储/移动硬盘"
,"智能设备"
,"音乐/影视/明星/音像"
,"商业/办公家具"
,"全屋定制"
,"手机"
,"珠宝/钻石/翡翠/黄金"
,"包装"
,"MP3/MP4/iPod/录音笔"];
	var pageIndex=1; //默认第一页
	var pageCount=100;//最大页数
	var pageSize=100;

    $('#tbWords').bind('keypress', function (event) {
        if (event.keyCode == "13") {
            //需要处理的事情
            doSearch();
            return false;
        }
    });

    var listlinkstart="<a href=\"list.html\" target=\"_blank\">列表</a>&nbsp"; //列表链接地址
    var listlinkend="&nbsp<a href=\"list.html\" target=\"_blank\">列表</a>"; //列表链接地址
	
	//输出分类页签
	//输出分页信息标签
	$("#topp").find("a").remove(); 
	$("#bottomp").find("a").remove(); 
	
	$("#topptype").find("a").remove(); 
	$("#bottomptype").find("a").remove(); 

    
	
	var firstitem="<a href=\"index.html\" target=\"_blank\">返回首页</a>";
	$("#topptype").append(firstitem); 
	$("#bottomptype").append(firstitem); 

    $("#topptype").append(listlinkend); 
	$("#bottomptype").append(listlinkend);   
	
	for(var i=0;i<typeNames.length;i++)
	{
		var liitem="&nbsp<a href=\"index.html?typename="+escape(typeNames[i])+"\" target=\"_blank\">"+typeNames[i]+"</a>";
		$("#topptype").append(liitem); 
		$("#bottomptype").append(liitem); 
	}

	$("#topptype").append(listlinkend); 
	$("#bottomptype").append(listlinkend);   

    Request = {
        QueryString : function(item){
        var svalue = location.search.match(new RegExp("[\?\&]" + item + "=([^\&]*)(\&?)","i"));
        return svalue ? svalue[1] : svalue;
        }
    }
    pageIndex= unescape(Request.QueryString("pageindex"));
	var queryPageType= unescape(Request.QueryString("typename"));
	
    if (queryPageType !== null 
	&& queryPageType !== undefined 
	&& queryPageType !==""
	&& queryPageType !=="null") { 
        searchByType(queryPageType); //如果查询类型不为空 则按照类型查询
    } 
	else
	{
		if (pageIndex == null 
		|| pageIndex == undefined 
		|| pageIndex ==""
		|| pageIndex =="null") { 
			pageIndex=1; //页信息如果为空 则直接将页信息置为1 默认第一页
		} 
        

		//输出分页信息标签
		$("#topp").find("a").remove(); 
		$("#bottomp").find("a").remove(); 
        $("#topp").append(listlinkstart); 
		$("#bottomp").append(listlinkstart);   
		for(var i=1;i<=pageCount;i++)
		{
			var liitem="<a href=\"index.html\" target=\"_blank\">首页</a>";
			if(i>1)
			{
				if(i==pageCount&&i!=1)
				{
					liitem="&nbsp<a href=\"index.html?pageindex="+pageCount+"\" target=\"_blank\">末页</a>";
				}
				else
				{
					liitem="&nbsp<a href=\"index.html?pageindex="+i+"\" target=\"_blank\">第"+i+"页</a>";
				}
				
			}
			$("#topp").append(liitem); 
			$("#bottomp").append(liitem);   
		}

        var listlink="&nbsp<a href=\"list.html\" target=\"_blank\">查看详细表格</a>";
        $("#topp").append(listlinkend); 
		$("#bottomp").append(listlinkend);   
		
		//如果查询类型为空则直接使用分页方式显示所有数据
		
		//校验分页信息
		if(pageIndex<1)
		{
			pageIndex=1;
		}
		else if(pageIndex>pageCount)
		{
			pageIndex=pageCount;
		}
		
		//获取当前页信息并加载
		searchByPage(pageIndex);
	}
	
	//点击查询按钮进行查询
	function doSearch() {
        var word=$("#tbWords").val();
        if (word !== null && word !== undefined && word !=="") { 
            //searchData(word);
			window.open("search.html?word="+escape(word)); 
        } 
        else
        {
            alert("请输入要查找的关键词！");
        }
	}
	
    function searchData(word)
    {
        var newArr=new Array();
        //查询data数据
        for(var i=0;i<dataArr.length;i++)
        {
            if(dataArr[i].name.indexOf(word)>-1||dataArr[i].type.indexOf(word)>-1)
            {
                newArr.push(dataArr[i]);
            }
        }
        //alert(newArr);
        $("ul").find("li").remove(); 
        //添加内容到网页
        for(var i=0;i<newArr.length;i++)
        {
            var item=newArr[i];
           
            var liitem="<li><figure class=\"effect-winston\"><img src=\""+item.pic+"\" alt=\""+item.name+"\"><figcaption><h2>["+item.type+"]"+item.name+"&nbsp;<span>"+item.card+"</span></h2>";
                liitem+="<p><a alt=\"领取优惠券\" href=\""+item.curl+"\" target=\"_blank\"><i class=\"icon-demo\"></i></a><a alt=\"直接领券购买\" href=\""+item.url+"\" target=\"_blank\">";
                liitem+="<i class=\"icon-buy\"></i></a></p><a href=\""+item.url+"\" target=\"_blank\">查看更多</a></figcaption></figure></li>";
                $("#ullist").append(liitem);
        }
    }
	
	function searchByType(typename)
    {
        var newArr=new Array();
        //查询data数据
        for(var i=0;i<dataArr.length;i++)
        {
            if(dataArr[i].type.indexOf(typename)>-1)
            {
                newArr.push(dataArr[i]);
            }
        }
        //alert(newArr);
        $("ul").find("li").remove(); 
        //添加内容到网页
        for(var i=0;i<newArr.length;i++)
        {
            var item=newArr[i];
           
            var liitem="<li><figure class=\"effect-winston\"><img src=\""+item.pic+"\" alt=\""+item.name+"\"><figcaption><h2>["+item.type+"]"+item.name+"&nbsp;<span>"+item.card+"</span></h2>";
                liitem+="<p><a alt=\"领取优惠券\" href=\""+item.curl+"\" target=\"_blank\"><i class=\"icon-demo\"></i></a><a alt=\"直接领券购买\" href=\""+item.url+"\" target=\"_blank\">";
                liitem+="<i class=\"icon-buy\"></i></a></p><a href=\""+item.url+"\" target=\"_blank\">查看更多</a></figcaption></figure></li>";
                $("#ullist").append(liitem);
        }
    }
	
	function searchByPage(pageindex)
    {
        var newArr=new Array();
        //将当前分页内容添加到临时数组中
        for(var i=(pageindex-1)*pageSize;i<pageindex*pageSize&&i<dataArr.length;i++)
        {
            newArr.push(dataArr[i]);
        }
        //alert(newArr);
        $("ul").find("li").remove(); 
        //添加内容到网页
        for(var i=0;i<newArr.length;i++)
        {
            var item=newArr[i];
           
            var liitem="<li><figure class=\"effect-winston\"><img src=\""+item.pic+"\" alt=\""+item.name+"\"><figcaption><h2>["+item.type+"]"+item.name+"&nbsp;<span>"+item.card+"</span></h2>";
                liitem+="<p><a alt=\"领取优惠券\" href=\""+item.curl+"\" target=\"_blank\"><i class=\"icon-demo\"></i></a><a alt=\"直接领券购买\" href=\""+item.url+"\" target=\"_blank\">";
                liitem+="<i class=\"icon-buy\"></i></a></p><a href=\""+item.url+"\" target=\"_blank\">查看更多</a></figcaption></figure></li>";
                $("#ullist").append(liitem);
        }
    }
    
</script>
</body>
</html>
